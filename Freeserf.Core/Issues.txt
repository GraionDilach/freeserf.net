Map Rendering:

- Map objects may appear above a construction site. Should those objects not be removed?
- Improve grid drawing in minimap
- Roads are not at the right location. Sometimes even a bit inside water. Maybe the tiles below are not at the right pos?
	- The relation between road segments is ok though


Non-working code:

- Sometimes a road can not be build in a direction where it should be possible
- Map clicks are not always considered or at the right spot/tile
- Sometimes road building is strange. No road is built in direction but then 2-3 at once.
- OtherEndDir not valid exception in Serf.cs line 2801. I guess the CallTransporter call in Flag.cs line 864 is the problem. Direction and/or IsWaterPath are not right.
  Maybe this is also the cause for sailors instead of transporters sometimes.
- Minimap clicks are only sometimes right (at least the map movement)
- Text color must be changeable (at least from green to black)
- Have a look at Objects.GetOrInsert!
- PathFinder sometimes returns roads where parts already exist. Is this valid? The road placement afterwards leads to an exception when creating another render road segment on an existing one.
	- So fix in pathfinder if this behavior is wrong or fix in render road segment creation logic if it is valid.
	- Map.IsRoadSegmentValid should return false in these cases so maybe the error is there
	- The bug occurs often when a path or building is destroyed (e.g. when the territory gets bigger)
- Destroying pathes seem to leave some weird drawn road pieces (maybe only the render component of it)
	- Maybe Game.DemolishRoad is the root cause of the two last points


AI:

- If linking diconnected flags, a flag may be used to connect to castle/stock that is very far away instead of a closer one
- Linking flags may also allow for placing flags on pathes and merging pathes to a near flag
- Only build new buildings if there are enough resources and the essential buildings are in progress or finished


Serf rendering:

- Serfs sometimes disappear (see RenderSerf.cs comments for details), maybe Serf.SwitchWaiting and following code is the problem
	- Now it seems that if two serfs are on the same map pos but serf switching on a road seems to work
- Serfs appear in front of map objects when they should not (e.g. in front of a tree top)
- In rare cases there is an idle serf on top of the castle. Is he not deleted properly?
	- Also sometimes knights are shortly on top of a military building after entering
- I saw a serf using a boat on a normal road when transporting stuff. The idle animation was of a normal transporter. :D
	- As other serfs can walk there too it must be an error with the animation index
	- Saw it again. Two with a boat and one normal transporter one a very small road (where only one transporter could be). They even block each other. It's a bug.
- When a stonecutter takes a piece of a bigger rock the remaining rock will shortly "jump" like the y coordinate is wrong for a short period of time
- Serf is behind stones while digging etc (BaseLineOffset was changed from 8 to 2). This must be adjusted for some actions like digging.


Logic:

- Saw a builder that doesn't find the correct way (he runs in a cycle). Is this due to pathfinder time limitation?
- This happens often. Some roads can not be used I guess. Something in the serf logic does not work correctly. Or the path finding is bugged.


Notification Box:

Test again because font char gaps should be smaller now!

- Text too long for:
	FoundStone
    MineEmpty
    OneHourSinceSave
    UnderAttack
- Chaos for:
    LostBuildings
    LostLand


TODO:

- Finish all popups in PopupBox.cs
- Finish AIs
- Finish rendering of fighting serfs (additional serf stuff)
- Finish rendering of all additional stuff for all buildings
- Finish game saving/loading
- Check/improve map position selection (clicks, minimap clicks, centering)
- Make game loading work
- Add more game options (like tutorial, multiplayer games or AI vs AI)
- Improve/fix sound
- Look through all TODO code comments and resolve them
- Bugfixing (important is the serf logic which seems to be very bugged in some situations)
- Remove unused code and improve bad code
- Adjust and limit all values properly (like max speed increase and so on)
- Check if all shortcuts/keystrokes work as expected (if not implement them)
- Add new features / improve usability (more infos in UI, better menus, indicators like "how many trees are left for a lumberjack" or even a visual search area if the building is selected)
- Localization (texts should be of the right language later)